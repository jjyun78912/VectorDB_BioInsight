# CLAUDE.md - BioInsight AI Development Guide

## Project Overview

**BioInsight AI**ëŠ” ë°”ì´ì˜¤Â·í—¬ìŠ¤ì¼€ì–´ ì—°êµ¬ìë¥¼ ìœ„í•œ AI ê¸°ë°˜ í†µí•© ì—°êµ¬ ì§€ì› í”Œë«í¼ì…ë‹ˆë‹¤.

> **"ì—°êµ¬ìì˜ ë°œê²¬ì„ ê°€ì†í™”í•˜ë˜, íŒë‹¨ì€ ì—°êµ¬ìì—ê²Œ"**

---

## System Architecture Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                                          â”‚
â”‚                          ğŸ§¬ BioInsight AI Platform Architecture                          â”‚
â”‚                                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                                 FRONTEND LAYER                                     â”‚  â”‚
â”‚  â”‚                           (React + Vite + Tailwind CSS)                            â”‚  â”‚
â”‚  â”‚                                                                                    â”‚  â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚  â”‚
â”‚  â”‚   â”‚    Hero      â”‚  â”‚  Knowledge   â”‚  â”‚   Daily      â”‚  â”‚   RNA-seq    â”‚          â”‚  â”‚
â”‚  â”‚   â”‚   Search     â”‚  â”‚    Graph     â”‚  â”‚  Briefing    â”‚  â”‚   Upload     â”‚          â”‚  â”‚
â”‚  â”‚   â”‚  Component   â”‚  â”‚     3D       â”‚  â”‚    View      â”‚  â”‚    Modal     â”‚          â”‚  â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚  â”‚
â”‚  â”‚                                                                                    â”‚  â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚  â”‚
â”‚  â”‚   â”‚  Trending    â”‚  â”‚   Paper      â”‚  â”‚  Pipeline    â”‚  â”‚    Chat      â”‚          â”‚  â”‚
â”‚  â”‚   â”‚   Papers     â”‚  â”‚   Agent      â”‚  â”‚  Progress    â”‚  â”‚  Interface   â”‚          â”‚  â”‚
â”‚  â”‚   â”‚    View      â”‚  â”‚    Chat      â”‚  â”‚    SSE       â”‚  â”‚    (RAG)     â”‚          â”‚  â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                          â”‚                                               â”‚
â”‚                                          â–¼                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                                  API LAYER                                         â”‚  â”‚
â”‚  â”‚                              (FastAPI + REST)                                      â”‚  â”‚
â”‚  â”‚                                                                                    â”‚  â”‚
â”‚  â”‚   /api/paper/*     /api/chat/*      /api/crawler/*    /api/rnaseq/*               â”‚  â”‚
â”‚  â”‚   /api/search/*    /api/graph/*     /api/briefing/*   /api/trends/*               â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                          â”‚                                               â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚         â”‚                                â”‚                                â”‚              â”‚
â”‚         â–¼                                â–¼                                â–¼              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                     â”‚  â”‚                             â”‚  â”‚                         â”‚  â”‚
â”‚  â”‚   CORE FEATURES     â”‚  â”‚    ANALYSIS MODULES         â”‚  â”‚    DATA LAYER           â”‚  â”‚
â”‚  â”‚                     â”‚  â”‚                             â”‚  â”‚                         â”‚  â”‚
â”‚  â”‚  â€¢ Paper RAG        â”‚  â”‚  â€¢ Bulk RNA-seq (2-Step)    â”‚  â”‚  â€¢ ChromaDB (Vector)    â”‚  â”‚
â”‚  â”‚  â€¢ Real-time Search â”‚  â”‚  â€¢ Single-cell (1-Step)     â”‚  â”‚  â€¢ PostgreSQL           â”‚  â”‚
â”‚  â”‚  â€¢ Knowledge Graph  â”‚  â”‚  â€¢ ML Prediction            â”‚  â”‚  â€¢ File Storage         â”‚  â”‚
â”‚  â”‚  â€¢ Daily Briefing   â”‚  â”‚  â€¢ RAG Interpretation       â”‚  â”‚                         â”‚  â”‚
â”‚  â”‚  â€¢ Trends/Citations â”‚  â”‚                             â”‚  â”‚                         â”‚  â”‚
â”‚  â”‚                     â”‚  â”‚                             â”‚  â”‚                         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                          â”‚                                               â”‚
â”‚                                          â–¼                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                              EXTERNAL SERVICES                                     â”‚  â”‚
â”‚  â”‚                                                                                    â”‚  â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚  â”‚
â”‚  â”‚   â”‚   Claude     â”‚  â”‚   PubMed     â”‚  â”‚   COSMIC     â”‚  â”‚    TCGA      â”‚          â”‚  â”‚
â”‚  â”‚   â”‚    API       â”‚  â”‚  E-utilities â”‚  â”‚   OncoKB     â”‚  â”‚   GDC API    â”‚          â”‚  â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚  â”‚
â”‚  â”‚                                                                                    â”‚  â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚  â”‚
â”‚  â”‚   â”‚   bioRxiv    â”‚  â”‚   CrossRef   â”‚  â”‚  Semantic    â”‚  â”‚   Enrichr    â”‚          â”‚  â”‚
â”‚  â”‚   â”‚   medRxiv    â”‚  â”‚     DOI      â”‚  â”‚   Scholar    â”‚  â”‚   (GO/KEGG)  â”‚          â”‚  â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## í•µì‹¬ ì² í•™

### 4ëŒ€ í•µì‹¬ ê°€ì¹˜

| ê°€ì¹˜ | ì„¤ëª… | ì ìš© |
|------|------|------|
| **ì •ë³´ ì ‘ê·¼ì„±** | í©ì–´ì§„ ë…¼ë¬¸/ë°ì´í„°ë¥¼ í•œ ê³³ì—ì„œ, ì–¸ì–´ ì¥ë²½ í•´ì†Œ | Paper RAG, ì‹¤ì‹œê°„ ê²€ìƒ‰ |
| **ë¶„ì„ ìë™í™”** | ë°˜ë³µì  ë¶„ì„ ì‘ì—… ëŒ€í–‰, í‘œì¤€ íŒŒì´í”„ë¼ì¸ | 6-Agent Pipeline, ML ì˜ˆì¸¡ |
| **ë§¥ë½ì  í•´ì„** | ê¸°ì¡´ ì§€ì‹ê³¼ ì—°ê²°, ê·¼ê±° ê¸°ë°˜ í•´ì„ (PMID ì¸ìš©) | RAG í•´ì„, TCGA ë¹„êµ |
| **ë¶ˆí™•ì‹¤ì„± íˆ¬ëª…ì„±** | í•œê³„/ì£¼ì˜ì‚¬í•­ ëª…ì‹œ, ê³¼ë„í•œ í™•ì‹  ë°©ì§€ | Guardrail, ê²€ì¦ ì œì•ˆ |

---

## Tech Stack

| Layer | Technology |
|-------|------------|
| **Frontend** | React 18+ / Vite / TypeScript / Tailwind CSS |
| **Backend** | Python 3.11+ / FastAPI / Uvicorn |
| **AI/LLM** | Claude API / PubMedBERT / LangChain |
| **Vector DB** | ChromaDB |
| **Database** | PostgreSQL |
| **RNA-seq** | DESeq2 (R) / Scanpy / CatBoost / SHAP |
| **Visualization** | Plotly / D3.js / 3d-force-graph / NetworkX |

---

## Core Features

### 1. Paper RAG System

```
PDF Upload â†’ Text Splitter â†’ PubMedBERT Embedding â†’ ChromaDB â†’ Semantic Search â†’ Claude API â†’ Answer + Citations
```

**API Endpoints**:
- `POST /api/paper/upload` - PDF ì—…ë¡œë“œ
- `POST /api/paper/analyze` - ë…¼ë¬¸ ë¶„ì„
- `POST /api/chat/ask` - Q&A

### 2. Real-time Search & Web Crawler

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Local DB   â”‚     â”‚  PubMed     â”‚     â”‚  DOI/URL    â”‚
â”‚   Search    â”‚     â”‚   Live      â”‚     â”‚   Import    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                   Web Crawler Agent
                 (PubMed, bioRxiv, CrossRef, Semantic Scholar)
```

### 3. Knowledge Graph (3D)

- react-force-graph-3d ê¸°ë°˜ Galaxy View
- ë…¼ë¬¸/ìœ ì „ì/ì§ˆë³‘/Pathway ë…¸ë“œ
- ì¸ìš© ê´€ê³„, ì—°ê´€ì„± ì‹œê°í™”

### 4. Daily Briefing

- í‰ì¼ ì˜¤ì „ 6ì‹œ ìë™ ìƒì„± (launchd)
- Multi-source: FDA, ClinicalTrials, bioRxiv, PubMed
- HTML ë‰´ìŠ¤ë ˆí„° í˜•ì‹

---

## RNA-seq Analysis Architecture

### Data Type Detection & Routing

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                                          â”‚
â”‚                     ğŸ§¬ RNA-seq Analysis - Unified Entry Point                            â”‚
â”‚                                                                                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                              INPUT DETECTION                                    â”‚   â”‚
â”‚   â”‚                                                                                 â”‚   â”‚
â”‚   â”‚   ğŸ“Š Matrix Shape Analysis:                                                     â”‚   â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚   â”‚   â”‚   genes Ã— samples (rows Ã— cols)                                         â”‚  â”‚   â”‚
â”‚   â”‚   â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                          â”‚  â”‚   â”‚
â”‚   â”‚   â”‚   â€¢ 20,000 Ã— 6~100    â†’  Bulk RNA-seq                                   â”‚  â”‚   â”‚
â”‚   â”‚   â”‚   â€¢ 20,000 Ã— 1,000+   â†’  Single-cell RNA-seq                            â”‚  â”‚   â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚   â”‚                                                                                 â”‚   â”‚
â”‚   â”‚   ğŸ”¬ Sample Count Check:                                                        â”‚   â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚   â”‚   â”‚   samples >= 6  â†’  DESeq2 í†µê³„ ë¶„ì„ ê°€ëŠ¥                                â”‚  â”‚   â”‚
â”‚   â”‚   â”‚   samples < 6   â†’  Pre-computed DEG (Fold Change only)                  â”‚  â”‚   â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚   â”‚                                                                                 â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                          â”‚                                               â”‚
â”‚                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚
â”‚                     â”‚                                         â”‚                          â”‚
â”‚                     â–¼                                         â–¼                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   â”‚                                     â”‚   â”‚                                     â”‚    â”‚
â”‚   â”‚      ğŸ§ª BULK RNA-seq                â”‚   â”‚      ğŸ”¬ SINGLE-CELL RNA-seq         â”‚    â”‚
â”‚   â”‚         (2-Step Process)            â”‚   â”‚         (1-Step Process)            â”‚    â”‚
â”‚   â”‚                                     â”‚   â”‚                                     â”‚    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Bulk RNA-seq Pipeline (2-Step Process)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                                          â”‚
â”‚                       ğŸ§ª BULK RNA-seq Pipeline (2-Step)                                  â”‚
â”‚                                                                                          â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•    â”‚
â”‚                              STEP 1: STATISTICAL DEG ANALYSIS                            â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•    â”‚
â”‚                                                                                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                               â”‚
â”‚   â”‚ count_      â”‚     â”‚ metadata    â”‚     â”‚ config      â”‚                               â”‚
â”‚   â”‚ matrix.csv  â”‚     â”‚ .csv        â”‚     â”‚ .json       â”‚                               â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                               â”‚
â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                       â”‚
â”‚                              â”‚                                                           â”‚
â”‚                              â–¼                                                           â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                   â”‚
â”‚                    â”‚   AGENT 1: DEG  â”‚                                                   â”‚
â”‚                    â”‚                 â”‚                                                   â”‚
â”‚                    â”‚  DESeq2 â†’ apeglm Shrinkage â†’ Filtering                             â”‚
â”‚                    â”‚                 â”‚                                                   â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                   â”‚
â”‚                             â”‚                                                            â”‚
â”‚                             â–¼                                                            â”‚
â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                           â”‚
â”‚            â”‚                                 â”‚                                           â”‚
â”‚   deg_significant.csv              normalized_counts.csv                                 â”‚
â”‚                                                                                          â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•    â”‚
â”‚                           STEP 2: INTERPRETATION & REPORT                                â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•    â”‚
â”‚                                                                                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚   â”‚  AGENT 2    â”‚  â”‚  AGENT 3    â”‚  â”‚  AGENT 4    â”‚  â”‚  AGENT 5    â”‚                    â”‚
â”‚   â”‚  Network    â”‚  â”‚  Pathway    â”‚  â”‚  DB Valid   â”‚  â”‚  Visual     â”‚                    â”‚
â”‚   â”‚             â”‚  â”‚             â”‚  â”‚             â”‚  â”‚             â”‚                    â”‚
â”‚   â”‚ â€¢ Spearman  â”‚  â”‚ â€¢ GO/KEGG   â”‚  â”‚ â€¢ COSMIC    â”‚  â”‚ â€¢ Volcano   â”‚                    â”‚
â”‚   â”‚ â€¢ Hub genes â”‚  â”‚ â€¢ Enrichr   â”‚  â”‚ â€¢ OncoKB    â”‚  â”‚ â€¢ Heatmap   â”‚                    â”‚
â”‚   â”‚ â€¢ NetworkX  â”‚  â”‚ â€¢ gseapy    â”‚  â”‚ â€¢ Scoring   â”‚  â”‚ â€¢ Network   â”‚                    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚
â”‚                                    â”‚                                                     â”‚
â”‚                                    â–¼                                                     â”‚
â”‚                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                             â”‚
â”‚                          â”‚    AGENT 6      â”‚                                             â”‚
â”‚                          â”‚    Report       â”‚                                             â”‚
â”‚                          â”‚                 â”‚                                             â”‚
â”‚                          â”‚  + ML Predict   â”‚â—„â”€â”€â”€â”€ CatBoost + SHAP                       â”‚
â”‚                          â”‚  + RAG Interp   â”‚â—„â”€â”€â”€â”€ Claude API + Vector                   â”‚
â”‚                          â”‚                 â”‚                                             â”‚
â”‚                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                             â”‚
â”‚                                   â”‚                                                      â”‚
â”‚                                   â–¼                                                      â”‚
â”‚                           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                               â”‚
â”‚                           â”‚ report.html  â”‚                                               â”‚
â”‚                           â”‚ (Interactive)â”‚                                               â”‚
â”‚                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                               â”‚
â”‚                                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Network Analysis Performance Optimization

Agent 2 (Network)ì—ì„œ ëŒ€ê·œëª¨ ìœ ì „ì ë„¤íŠ¸ì›Œí¬ë¥¼ ì²˜ë¦¬í•  ë•Œ ë‹¤ìŒ ìµœì í™”ê°€ ì ìš©ë©ë‹ˆë‹¤:

| ë‹¨ê³„ | ìµœì í™” ê¸°ë²• | ì„±ëŠ¥ í–¥ìƒ |
|------|-------------|-----------|
| **Correlation ê³„ì‚°** | Vectorized numpy í–‰ë ¬ ì—°ì‚° | O(nÂ²) ë£¨í”„ â†’ í–‰ë ¬ ê³± (100x+) |
| **Graph ë¹Œë”©** | `from_pandas_edgelist()` | iterrows â†’ ë²¡í„°í™” (10x+) |
| **Hub Centrality** | Adaptive ì•Œê³ ë¦¬ì¦˜ | ì¡°ê±´ë¶€ ìµœì í™” (ì•„ë˜ ì°¸ì¡°) |

**Hub Gene Centrality ìµœì í™” ì „ëµ**:

```python
# Dense graph (>1M edges): betweenness ëŒ€ì‹  weighted degree ì‚¬ìš©
if n_edges > 1_000_000:
    # Weighted degree sum as betweenness proxy (17ì´ˆ vs ë¬´í•œëŒ€)
    betweenness = {n: sum(G[n][neighbor]['weight'] for neighbor in G[n]) for n in G.nodes()}

# Large graph (>1K nodes): k-sampling approximate betweenness
elif n_nodes > 1000:
    betweenness = nx.betweenness_centrality(G, k=100, weight='weight')

# Small graph: exact betweenness
else:
    betweenness = nx.betweenness_centrality(G, weight='weight')
```

**ë²¤ì¹˜ë§ˆí¬ (TCGA BRCA 50 samples, 7.5K genes, 3.38M edges)**:

| Agent | ì†Œìš” ì‹œê°„ | ì¶œë ¥ |
|-------|----------|------|
| Agent 1 (DEG) | ~30ì´ˆ | 7,583 DEGs |
| Agent 2 (Network) | ~2ë¶„ | 3.38M edges, 20 hub genes |
| Agent 3 (Pathway) | ~22ì´ˆ | 66 terms |
| Agent 4 (Validation) | ~2ë¶„ | 20 RAG interpretations |
| Agent 5 (Visualization) | ~2ë¶„ | 16 figures |
| Agent 6 (Report) | ~1ë¶„ | 11MB HTML |
| **Total** | **~8ë¶„** | ì „ì²´ íŒŒì´í”„ë¼ì¸ |

### Single-cell RNA-seq Pipeline (1-Step Process)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                                          â”‚
â”‚                      ğŸ”¬ SINGLE-CELL RNA-seq Pipeline (1-Step)                            â”‚
â”‚                                                                                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                                                                                 â”‚   â”‚
â”‚   â”‚                    UNIFIED SCANPY/SEURAT PIPELINE                               â”‚   â”‚
â”‚   â”‚                                                                                 â”‚   â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚   â”‚
â”‚   â”‚   â”‚    QC     â”‚â”€â”€â–¶â”‚  Normal   â”‚â”€â”€â–¶â”‚   HVG     â”‚â”€â”€â–¶â”‚   PCA     â”‚                â”‚   â”‚
â”‚   â”‚   â”‚ Filtering â”‚   â”‚  ization  â”‚   â”‚ Selection â”‚   â”‚           â”‚                â”‚   â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚   â”‚
â”‚   â”‚         â”‚                                               â”‚                       â”‚   â”‚
â”‚   â”‚         â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚   â”‚
â”‚   â”‚         â”‚   â”‚                                                                   â”‚   â”‚
â”‚   â”‚         â–¼   â–¼                                                                   â”‚   â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚   â”‚
â”‚   â”‚   â”‚  Batch    â”‚â”€â”€â–¶â”‚   UMAP    â”‚â”€â”€â–¶â”‚ Clusteringâ”‚â”€â”€â–¶â”‚ Cell Type â”‚                â”‚   â”‚
â”‚   â”‚   â”‚Correction â”‚   â”‚  t-SNE    â”‚   â”‚ (Leiden)  â”‚   â”‚Annotation â”‚                â”‚   â”‚
â”‚   â”‚   â”‚(Harmony)  â”‚   â”‚           â”‚   â”‚           â”‚   â”‚(CellTypist)â”‚               â”‚   â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚   â”‚
â”‚   â”‚                                                         â”‚                       â”‚   â”‚
â”‚   â”‚                                                         â–¼                       â”‚   â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚   â”‚
â”‚   â”‚   â”‚  Pseudo   â”‚â—€â”€â”€â”‚Trajectory â”‚â—€â”€â”€â”‚   DEG     â”‚â—€â”€â”€â”‚  Marker   â”‚                â”‚   â”‚
â”‚   â”‚   â”‚   bulk    â”‚   â”‚(optional) â”‚   â”‚  (Wilcox) â”‚   â”‚   Genes   â”‚                â”‚   â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚   â”‚
â”‚   â”‚                                                                                 â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                                          â”‚
â”‚   Output: AnnData (.h5ad), Cluster Markers, Cell Composition, UMAP/Violin/Dot plots     â”‚
â”‚                                                                                          â”‚
â”‚   âœ… Complete in 1 Step (QC â†’ Analysis â†’ Report in single pipeline)                      â”‚
â”‚                                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Bulk vs Single-cell Comparison

| êµ¬ë¶„ | Bulk RNA-seq (2-Step) | Single-cell RNA-seq (1-Step) |
|------|----------------------|------------------------------|
| **ì…ë ¥** | genes Ã— samples matrix | cells Ã— genes matrix |
| **ìƒ˜í”Œ ìˆ˜** | 6~100 samples | 1,000~100,000+ cells |
| **Step 1** | DESeq2 í†µê³„ ë¶„ì„ | - |
| **Step 2** | Network/Pathway/Validation/Report | QC â†’ Clustering â†’ Annotation â†’ Report |
| **ì£¼ìš” ë„êµ¬** | DESeq2, NetworkX, Enrichr, CatBoost | Scanpy, Seurat, CellTypist, Harmony |
| **ì¶œë ¥** | DEG list + HTML Report | Cell clusters + Markers + Report |

---

## ML & RAG Modules

### ML Prediction Module

```
TCGA Data â†’ Preprocess (TPMâ†’log2â†’std) â†’ Optuna HPO â†’ CatBoost â†’ SHAP Explainer
                                                           â”‚
                                                           â–¼
User Data â†’ Gene ID Mapping â†’ CatBoost Predict â†’ SHAP Waterfall â†’ Output
                                                                    â”‚
                                                                    â–¼
                                              prediction_label, probability, top_genes
                                              âš ï¸ "ì˜ˆì¸¡ì€ ì§„ë‹¨ì´ ì•„ë‹ˆë©°, ì°¸ê³ ìš©ì…ë‹ˆë‹¤"
```

**Pre-trained Models**:
| Cancer Type | Samples | AUC | Status |
|-------------|---------|-----|--------|
| Breast (BRCA) | 1,222 | 0.998 | âœ… |
| Pan-Cancer | 11,000+ | 0.95+ | âœ… |
| Pancreatic | TBD | TBD | ğŸ“‹ |

### RAG Interpretation Module

```
Gene Symbol + Cancer Type + Direction
              â”‚
              â–¼
    PubMedBERT Embedding â†’ ChromaDB Search â†’ Top-k chunks
                                                   â”‚
                                                   â–¼
                                            Claude API
                                     (Literature-backed interpretation)
                                                   â”‚
                                                   â–¼
                              "BRCA1ì€ DNA ì†ìƒ ë³µêµ¬ì— ì¤‘ìš”í•œ ì—­í• ..." [PMID: 12345678]
```

---

## Project Structure

```
VectorDB_BioInsight/
â”œâ”€â”€ backend/
â”‚   â””â”€â”€ app/
â”‚       â”œâ”€â”€ main.py                      # FastAPI entry point
â”‚       â”œâ”€â”€ api/routes/
â”‚       â”‚   â”œâ”€â”€ paper.py                 # Paper analysis
â”‚       â”‚   â”œâ”€â”€ chat.py                  # AI chat
â”‚       â”‚   â”œâ”€â”€ crawler.py               # Web crawler
â”‚       â”‚   â”œâ”€â”€ rnaseq.py                # RNA-seq API (SSE)
â”‚       â”‚   â””â”€â”€ briefing.py              # Daily Briefing
â”‚       â””â”€â”€ core/
â”‚           â”œâ”€â”€ pdf_parser.py            # PDF extraction
â”‚           â”œâ”€â”€ text_splitter.py         # Bio-aware chunking
â”‚           â”œâ”€â”€ embeddings.py            # PubMedBERT
â”‚           â”œâ”€â”€ vector_store.py          # ChromaDB
â”‚           â””â”€â”€ web_crawler_agent.py     # Multi-source crawler
â”‚
â”œâ”€â”€ frontend/react_app/
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ Hero.tsx                     # Search interface
â”‚   â”‚   â”œâ”€â”€ KnowledgeGraph.tsx           # 3D visualization
â”‚   â”‚   â”œâ”€â”€ RNAseqUploadModal.tsx        # RNA-seq upload
â”‚   â”‚   â”œâ”€â”€ PipelineProgress.tsx         # SSE progress
â”‚   â”‚   â””â”€â”€ DailyBriefing.tsx            # News digest
â”‚   â””â”€â”€ services/client.ts               # API client
â”‚
â”œâ”€â”€ rnaseq_pipeline/
â”‚   â”œâ”€â”€ orchestrator.py                  # Pipeline controller
â”‚   â”œâ”€â”€ agents/
â”‚   â”‚   â”œâ”€â”€ agent1_deg.py                # DESeq2 analysis
â”‚   â”‚   â”œâ”€â”€ agent2_network.py            # Network/Hub genes
â”‚   â”‚   â”œâ”€â”€ agent3_pathway.py            # GO/KEGG enrichment
â”‚   â”‚   â”œâ”€â”€ agent4_validation.py         # DB validation
â”‚   â”‚   â”œâ”€â”€ agent5_visualization.py      # Plots generation
â”‚   â”‚   â””â”€â”€ agent6_report.py             # HTML report
â”‚   â”œâ”€â”€ ml/
â”‚   â”‚   â”œâ”€â”€ trainer.py                   # CatBoost training
â”‚   â”‚   â”œâ”€â”€ predictor.py                 # Prediction service
â”‚   â”‚   â””â”€â”€ pancancer_classifier.py      # Pan-cancer model
â”‚   â””â”€â”€ rag/
â”‚       â””â”€â”€ gene_interpreter.py          # RAG interpretation
â”‚
â”œâ”€â”€ bio-daily-briefing/
â”‚   â””â”€â”€ src/
â”‚       â”œâ”€â”€ aggregator.py                # Multi-source aggregation
â”‚       â”œâ”€â”€ scheduler.py                 # Automation (launchd)
â”‚       â””â”€â”€ sources/                     # FDA, Trials, bioRxiv
â”‚
â”œâ”€â”€ models/rnaseq/                       # Pre-trained models
â”‚   â”œâ”€â”€ breast/                          # TCGA-BRCA (AUC 0.998)
â”‚   â””â”€â”€ pancancer/                       # Multi-cancer classifier
â”‚
â”œâ”€â”€ chroma_db/                           # Vector database
â”œâ”€â”€ data/papers/                         # Collected papers
â””â”€â”€ docs/
    â”œâ”€â”€ UNIFIED_ARCHITECTURE.md          # Full architecture
    â””â”€â”€ RNASEQ_ARCHITECTURE.md           # RNA-seq details
```

---

## API Endpoints

### Core Features (âœ… êµ¬í˜„ë¨)

```
# Paper Analysis
POST   /api/paper/upload
POST   /api/paper/analyze
POST   /api/chat/ask

# Real-time Search
GET    /api/crawler/search?q=...
GET    /api/crawler/trending/{category}
POST   /api/crawler/fetch/doi

# Knowledge Graph
GET    /api/graph/
GET    /api/graph/node/{id}

# Daily Briefing
GET    /api/briefing/latest
GET    /api/briefing/archive
```

### RNA-seq Analysis (âœ… êµ¬í˜„ë¨)

```
# File Upload & Analysis
POST   /api/rnaseq/upload                # count_matrix.csv, metadata.csv
POST   /api/rnaseq/start/{job_id}        # Start pipeline
GET    /api/rnaseq/progress/{job_id}     # SSE streaming
GET    /api/rnaseq/status/{job_id}       # Status check

# Results
GET    /api/rnaseq/report/{job_id}       # HTML report
GET    /api/rnaseq/download/{job_id}     # Download results
```

---

## Code Patterns & Guidelines

### ì¶œë ¥ ì–¸ì–´ (í•œêµ­ì–´ ê¸°ë³¸)

```python
# âœ… Correct
interpretation = "KRAS ìƒí–¥ ë°œí˜„ì€ ì·Œì¥ì•”ì—ì„œ í”íˆ ê´€ì°°ë©ë‹ˆë‹¤."

# âŒ Wrong
interpretation = "KRAS upregulation is commonly observed in pancreatic cancer."
```

### ë¶ˆí™•ì‹¤ì„± ëª…ì‹œ (í•„ìˆ˜)

```python
# âœ… Correct
result = {
    "prediction": "ì·Œì¥ì•” í™•ë¥  87%",
    "warning": "âš ï¸ ì˜ˆì¸¡ì´ë©° ì§„ë‹¨ì´ ì•„ë‹™ë‹ˆë‹¤",
    "suggested_validations": ["ì¡°ì§ê²€ì‚¬ í™•ì¸"]
}

# âŒ Wrong
result = {"prediction": "ì´ í™˜ìëŠ” ì·Œì¥ì•”ì…ë‹ˆë‹¤"}
```

### PMID ì¸ìš© (í•„ìˆ˜)

```python
# âœ… Correct
interpretation = "KRASëŠ” ì·Œì¥ì•”ì˜ 90%ì—ì„œ ë³€ì´ê°€ ê´€ì°°ë¨ [PMID: 29625050]"

# âŒ Wrong
interpretation = "KRASëŠ” ì·Œì¥ì•”ì˜ ì£¼ìš” ì›ì¸ì´ë‹¤"  # ì¶œì²˜ ì—†ìŒ
```

---

## DO / DON'T Checklist

| DO âœ… | DON'T âŒ |
|-------|---------|
| ì¶œì²˜/ê·¼ê±° ëª…ì‹œ (PMID, URL) | ì¶œì²˜ ì—†ëŠ” ì£¼ì¥ |
| í•œê³„/ì£¼ì˜ì‚¬í•­ ì•ˆë‚´ | ë¶ˆí™•ì‹¤ì„± ìˆ¨ê¹€ |
| í•œêµ­ì–´ ìš°ì„  ì¶œë ¥ | ì˜ë¬¸ ì „ìš© |
| ML ì˜ˆì¸¡ = "ì°¸ê³ ìš©" ëª…ì‹œ | "ì§„ë‹¨"ìœ¼ë¡œ í‘œí˜„ |
| ê²€ì¦ ì‹¤í—˜ ì œì•ˆ | ê²€ì¦ ì—†ì´ ê²°ë¡  |

---

## Development Roadmap

### Completed (âœ…)

| Feature | Description |
|---------|-------------|
| Paper RAG | PDF ë¶„ì„, ì„ë² ë”©, Q&A |
| Web Crawler | PubMed, bioRxiv ê²€ìƒ‰ |
| Knowledge Graph | 3D ì‹œê°í™” |
| Daily Briefing | AI ë‰´ìŠ¤ ë‹¤ì´ì œìŠ¤íŠ¸ |
| RNA-seq 6-Agent | DEG, Network, Pathway, Validation, Viz, Report |
| ML Prediction | CatBoost + SHAP (AUC 0.998) |
| RAG Interpretation | Claude + PubMedBERT |
| Web UI | SSE Progress Streaming |

### Planned (ğŸ“‹)

| Feature | Description |
|---------|-------------|
| Single-cell Pipeline | Scanpy/Seurat integration |
| Cell Type Annotation | CellTypist |
| Proteomics | ë‹¨ë°±ì§ˆ ë¶„ì„ |
| Genomics | ë³€ì´ ë¶„ì„ |
| Drug Discovery | ì•½ë¬¼ íƒìƒ‰ |

---

## Important Notes

### ë¦¬í¬íŠ¸ ìƒì„± ì‹œ ì£¼ì˜ì‚¬í•­

```python
# âš ï¸ ë¦¬í¬íŠ¸ ìƒì„± ì‹œ CSV íŒŒì¼ í•„ìš”
# report_data.jsonë§Œ ìˆìœ¼ë©´ "No data" í‘œì‹œë¨

# âœ… ì˜¬ë°”ë¥¸ í´ë” êµ¬ì¡°
output_dir/
â”œâ”€â”€ deg_significant.csv      # í•„ìˆ˜
â”œâ”€â”€ hub_genes.csv            # í•„ìˆ˜
â”œâ”€â”€ pathway_summary.csv      # í•„ìˆ˜
â”œâ”€â”€ integrated_gene_table.csv # í•„ìˆ˜
â””â”€â”€ figures/
    â”œâ”€â”€ volcano_plot.png
    â””â”€â”€ network_3d_interactive.html
```

### Daily Briefing ë°ì´í„° í˜•ì‹

```python
# newsletter_generatorëŠ” list í˜•ì‹ì„ ê¸°ëŒ€í•¨
# scheduler.pyì—ì„œ ë°˜ë“œì‹œ ë³€í™˜ í•„ìš”!

# âŒ Wrong (dict í˜•ì‹)
clinical_trials = {"phase3_results": [...], "new_trials": [...]}

# âœ… Correct (list í˜•ì‹)
clinical_trials = [
    {"type": "phase3_completed", "title": "...", "description": "..."}
]
```

---

## Resources

- [FastAPI Documentation](https://fastapi.tiangolo.com/)
- [ChromaDB Documentation](https://docs.trychroma.com/)
- [PubMedBERT](https://huggingface.co/microsoft/BiomedNLP-PubMedBERT-base-uncased-abstract)
- [DESeq2 Vignette](https://bioconductor.org/packages/release/bioc/vignettes/DESeq2/inst/doc/DESeq2.html)
- [Scanpy Documentation](https://scanpy.readthedocs.io/)
- [CatBoost Documentation](https://catboost.ai/docs/)
- [SHAP Documentation](https://shap.readthedocs.io/)

---

*Last Updated: 2026-01-13*
