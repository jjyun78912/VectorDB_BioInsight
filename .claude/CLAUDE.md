# CLAUDE.md - BioInsight AI Development Guide

## Project Overview

**BioInsight AI**ëŠ” ë°”ì´ì˜¤Â·í—¬ìŠ¤ì¼€ì–´ ì—°êµ¬ìë¥¼ ìœ„í•œ AI ê¸°ë°˜ í†µí•© ì—°êµ¬ ì§€ì› í”Œë«í¼ì…ë‹ˆë‹¤.

> **"ì—°êµ¬ìì˜ ë°œê²¬ì„ ê°€ì†í™”í•˜ë˜, íŒë‹¨ì€ ì—°êµ¬ìì—ê²Œ"**

---

## System Architecture Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                                          â”‚
â”‚                          ğŸ§¬ BioInsight AI Platform Architecture                          â”‚
â”‚                                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                                 FRONTEND LAYER                                     â”‚  â”‚
â”‚  â”‚                           (React + Vite + Tailwind CSS)                            â”‚  â”‚
â”‚  â”‚                                                                                    â”‚  â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚  â”‚
â”‚  â”‚   â”‚    Hero      â”‚  â”‚  Knowledge   â”‚  â”‚   Daily      â”‚  â”‚   RNA-seq    â”‚          â”‚  â”‚
â”‚  â”‚   â”‚   Search     â”‚  â”‚    Graph     â”‚  â”‚  Briefing    â”‚  â”‚   Upload     â”‚          â”‚  â”‚
â”‚  â”‚   â”‚  Component   â”‚  â”‚     3D       â”‚  â”‚    View      â”‚  â”‚    Modal     â”‚          â”‚  â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚  â”‚
â”‚  â”‚                                                                                    â”‚  â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚  â”‚
â”‚  â”‚   â”‚  Trending    â”‚  â”‚   Paper      â”‚  â”‚  Pipeline    â”‚  â”‚    Chat      â”‚          â”‚  â”‚
â”‚  â”‚   â”‚   Papers     â”‚  â”‚   Agent      â”‚  â”‚  Progress    â”‚  â”‚  Interface   â”‚          â”‚  â”‚
â”‚  â”‚   â”‚    View      â”‚  â”‚    Chat      â”‚  â”‚    SSE       â”‚  â”‚    (RAG)     â”‚          â”‚  â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                          â”‚                                               â”‚
â”‚                                          â–¼                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                                  API LAYER                                         â”‚  â”‚
â”‚  â”‚                              (FastAPI + REST)                                      â”‚  â”‚
â”‚  â”‚                                                                                    â”‚  â”‚
â”‚  â”‚   /api/paper/*     /api/chat/*      /api/crawler/*    /api/rnaseq/*               â”‚  â”‚
â”‚  â”‚   /api/search/*    /api/graph/*     /api/briefing/*   /api/trends/*               â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                          â”‚                                               â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚         â”‚                                â”‚                                â”‚              â”‚
â”‚         â–¼                                â–¼                                â–¼              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                     â”‚  â”‚                             â”‚  â”‚                         â”‚  â”‚
â”‚  â”‚   CORE FEATURES     â”‚  â”‚    ANALYSIS MODULES         â”‚  â”‚    DATA LAYER           â”‚  â”‚
â”‚  â”‚                     â”‚  â”‚                             â”‚  â”‚                         â”‚  â”‚
â”‚  â”‚  â€¢ Paper RAG        â”‚  â”‚  â€¢ Bulk RNA-seq (2-Step)    â”‚  â”‚  â€¢ ChromaDB (Vector)    â”‚  â”‚
â”‚  â”‚  â€¢ Real-time Search â”‚  â”‚  â€¢ Single-cell (1-Step)     â”‚  â”‚  â€¢ PostgreSQL           â”‚  â”‚
â”‚  â”‚  â€¢ Knowledge Graph  â”‚  â”‚  â€¢ ML Prediction            â”‚  â”‚  â€¢ File Storage         â”‚  â”‚
â”‚  â”‚  â€¢ Daily Briefing   â”‚  â”‚  â€¢ RAG Interpretation       â”‚  â”‚                         â”‚  â”‚
â”‚  â”‚  â€¢ Trends/Citations â”‚  â”‚                             â”‚  â”‚                         â”‚  â”‚
â”‚  â”‚                     â”‚  â”‚                             â”‚  â”‚                         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                          â”‚                                               â”‚
â”‚                                          â–¼                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                              EXTERNAL SERVICES                                     â”‚  â”‚
â”‚  â”‚                                                                                    â”‚  â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚  â”‚
â”‚  â”‚   â”‚   Claude     â”‚  â”‚   PubMed     â”‚  â”‚   COSMIC     â”‚  â”‚    TCGA      â”‚          â”‚  â”‚
â”‚  â”‚   â”‚    API       â”‚  â”‚  E-utilities â”‚  â”‚   OncoKB     â”‚  â”‚   GDC API    â”‚          â”‚  â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚  â”‚
â”‚  â”‚                                                                                    â”‚  â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚  â”‚
â”‚  â”‚   â”‚   bioRxiv    â”‚  â”‚   CrossRef   â”‚  â”‚  Semantic    â”‚  â”‚   Enrichr    â”‚          â”‚  â”‚
â”‚  â”‚   â”‚   medRxiv    â”‚  â”‚     DOI      â”‚  â”‚   Scholar    â”‚  â”‚   (GO/KEGG)  â”‚          â”‚  â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## í•µì‹¬ ì² í•™

### 4ëŒ€ í•µì‹¬ ê°€ì¹˜

| ê°€ì¹˜ | ì„¤ëª… | ì ìš© |
|------|------|------|
| **ì •ë³´ ì ‘ê·¼ì„±** | í©ì–´ì§„ ë…¼ë¬¸/ë°ì´í„°ë¥¼ í•œ ê³³ì—ì„œ, ì–¸ì–´ ì¥ë²½ í•´ì†Œ | Paper RAG, ì‹¤ì‹œê°„ ê²€ìƒ‰ |
| **ë¶„ì„ ìë™í™”** | ë°˜ë³µì  ë¶„ì„ ì‘ì—… ëŒ€í–‰, í‘œì¤€ íŒŒì´í”„ë¼ì¸ | 6-Agent Pipeline, ML ì˜ˆì¸¡ |
| **ë§¥ë½ì  í•´ì„** | ê¸°ì¡´ ì§€ì‹ê³¼ ì—°ê²°, ê·¼ê±° ê¸°ë°˜ í•´ì„ (PMID ì¸ìš©) | RAG í•´ì„, TCGA ë¹„êµ |
| **ë¶ˆí™•ì‹¤ì„± íˆ¬ëª…ì„±** | í•œê³„/ì£¼ì˜ì‚¬í•­ ëª…ì‹œ, ê³¼ë„í•œ í™•ì‹  ë°©ì§€ | Guardrail, ê²€ì¦ ì œì•ˆ |

---

## Tech Stack

| Layer | Technology |
|-------|------------|
| **Frontend** | React 18+ / Vite / TypeScript / Tailwind CSS |
| **Backend** | Python 3.11+ / FastAPI / Uvicorn |
| **AI/LLM** | OpenAI (gpt-4o-mini) / Claude API / Vertex AI (fallback chain) |
| **Vector DB** | ChromaDB + PubMedBERT embeddings |
| **Database** | PostgreSQL |
| **RNA-seq** | DESeq2 (R) / Scanpy / CatBoost / SHAP |
| **Visualization** | Plotly / D3.js / 3d-force-graph / NetworkX |

### LLM Provider Fallback Chain

ì‹œìŠ¤í…œì€ ë‹¤ìŒ ìˆœì„œë¡œ LLM providerë¥¼ ì‹œë„í•©ë‹ˆë‹¤:
1. **OpenAI** (gpt-4o-mini) - Primary, ë¹ ë¥´ê³  ì €ë ´
2. **Claude API** (Anthropic) - Fallback
3. **Vertex AI** (Google) - Secondary fallback

---

## Core Features

### 1. Paper Search & RAG

- **Local DB Search**: ChromaDB ê¸°ë°˜ ë²¡í„° ê²€ìƒ‰ (ì •ë°€ë„ ëª¨ë“œ ì§€ì›)
- **PubMed Live Search**: ì‹¤ì‹œê°„ PubMed ê²€ìƒ‰ (í•œâ†’ì˜ ìë™ ë²ˆì—­)
- **Paper Explainer**: Quick (ê·œì¹™ ê¸°ë°˜) + LLM (ìƒì„¸ ë¶„ì„) 2ë‹¨ê³„
- **Paper Insights**: Bottom Line, Study Quality, Evidence Level í‰ê°€

### 2. Translation Service (ì–‘ë°©í–¥)

| ë°©í–¥ | ìš©ë„ |
|------|------|
| **í•œêµ­ì–´ â†’ ì˜ì–´** | PubMed ê²€ìƒ‰ ì¿¼ë¦¬ ë²ˆì—­ |
| **ì˜ì–´ â†’ í•œêµ­ì–´** | ë…¼ë¬¸ ì œëª©/ì´ˆë¡ ë²ˆì—­, BOTTOM LINE |

**ì„±ëŠ¥ ìµœì í™”**:
- ê²€ìƒ‰ ê²°ê³¼ ë²ˆì—­: ë™ê¸° â†’ ë¹„ë™ê¸° ë°±ê·¸ë¼ìš´ë“œ (55ì´ˆ â†’ 2.5ì´ˆ)
- Abstract ë²ˆì—­ ì œí•œ: 2000ì â†’ 5000ì í™•ì¥

### 3. Knowledge Graph (3D)

- react-force-graph-3d ê¸°ë°˜ Galaxy View
- ë…¼ë¬¸/ìœ ì „ì/ì§ˆë³‘/Pathway ë…¸ë“œ
- ì¸ìš© ê´€ê³„, ì—°ê´€ì„± ì‹œê°í™”

### 4. Daily Briefing

- í‰ì¼ ì˜¤ì „ 6ì‹œ ìë™ ìƒì„± (launchd)
- Multi-source: FDA, ClinicalTrials, bioRxiv, PubMed
- HTML ë‰´ìŠ¤ë ˆí„° í˜•ì‹

---

## RNA-seq Analysis Architecture

### Data Type Detection & Routing

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                                          â”‚
â”‚                     ğŸ§¬ RNA-seq Analysis - Unified Entry Point                            â”‚
â”‚                                                                                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                              INPUT DETECTION                                    â”‚   â”‚
â”‚   â”‚                                                                                 â”‚   â”‚
â”‚   â”‚   ğŸ“Š Matrix Shape Analysis:                                                     â”‚   â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚   â”‚   â”‚   genes Ã— samples (rows Ã— cols)                                         â”‚  â”‚   â”‚
â”‚   â”‚   â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                          â”‚  â”‚   â”‚
â”‚   â”‚   â”‚   â€¢ 20,000 Ã— 6~100    â†’  Bulk RNA-seq                                   â”‚  â”‚   â”‚
â”‚   â”‚   â”‚   â€¢ 20,000 Ã— 1,000+   â†’  Single-cell RNA-seq                            â”‚  â”‚   â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚   â”‚                                                                                 â”‚   â”‚
â”‚   â”‚   ğŸ”¬ Sample Count Check:                                                        â”‚   â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚   â”‚   â”‚   samples >= 6  â†’  DESeq2 í†µê³„ ë¶„ì„ ê°€ëŠ¥                                â”‚  â”‚   â”‚
â”‚   â”‚   â”‚   samples < 6   â†’  Pre-computed DEG (Fold Change only)                  â”‚  â”‚   â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚   â”‚                                                                                 â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                          â”‚                                               â”‚
â”‚                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚
â”‚                     â”‚                                         â”‚                          â”‚
â”‚                     â–¼                                         â–¼                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   â”‚                                     â”‚   â”‚                                     â”‚    â”‚
â”‚   â”‚      ğŸ§ª BULK RNA-seq                â”‚   â”‚      ğŸ”¬ SINGLE-CELL RNA-seq         â”‚    â”‚
â”‚   â”‚         (2-Step Process)            â”‚   â”‚         (1-Step Process)            â”‚    â”‚
â”‚   â”‚                                     â”‚   â”‚                                     â”‚    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Bulk RNA-seq Pipeline (2-Step Process)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                                          â”‚
â”‚                       ğŸ§ª BULK RNA-seq Pipeline (2-Step)                                  â”‚
â”‚                                                                                          â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•    â”‚
â”‚                              STEP 1: STATISTICAL DEG ANALYSIS                            â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•    â”‚
â”‚                                                                                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                               â”‚
â”‚   â”‚ count_      â”‚     â”‚ metadata    â”‚     â”‚ config      â”‚                               â”‚
â”‚   â”‚ matrix.csv  â”‚     â”‚ .csv        â”‚     â”‚ .json       â”‚                               â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                               â”‚
â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                       â”‚
â”‚                              â”‚                                                           â”‚
â”‚                              â–¼                                                           â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                   â”‚
â”‚                    â”‚   AGENT 1: DEG  â”‚                                                   â”‚
â”‚                    â”‚                 â”‚                                                   â”‚
â”‚                    â”‚  DESeq2 â†’ apeglm Shrinkage â†’ Filtering                             â”‚
â”‚                    â”‚                 â”‚                                                   â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                   â”‚
â”‚                             â”‚                                                            â”‚
â”‚                             â–¼                                                            â”‚
â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                           â”‚
â”‚            â”‚                                 â”‚                                           â”‚
â”‚   deg_significant.csv              normalized_counts.csv                                 â”‚
â”‚                                                                                          â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•    â”‚
â”‚                           STEP 2: INTERPRETATION & REPORT                                â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•    â”‚
â”‚                                                                                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚   â”‚  AGENT 2    â”‚  â”‚  AGENT 3    â”‚  â”‚  AGENT 4    â”‚  â”‚  AGENT 5    â”‚                    â”‚
â”‚   â”‚  Network    â”‚  â”‚  Pathway    â”‚  â”‚  DB Valid   â”‚  â”‚  Visual     â”‚                    â”‚
â”‚   â”‚             â”‚  â”‚             â”‚  â”‚             â”‚  â”‚             â”‚                    â”‚
â”‚   â”‚ â€¢ Spearman  â”‚  â”‚ â€¢ GO/KEGG   â”‚  â”‚ â€¢ COSMIC    â”‚  â”‚ â€¢ Volcano   â”‚                    â”‚
â”‚   â”‚ â€¢ Hub genes â”‚  â”‚ â€¢ Enrichr   â”‚  â”‚ â€¢ OncoKB    â”‚  â”‚ â€¢ Heatmap   â”‚                    â”‚
â”‚   â”‚ â€¢ NetworkX  â”‚  â”‚ â€¢ gseapy    â”‚  â”‚ â€¢ Scoring   â”‚  â”‚ â€¢ Network   â”‚                    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚
â”‚                                    â”‚                                                     â”‚
â”‚                                    â–¼                                                     â”‚
â”‚                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                             â”‚
â”‚                          â”‚    AGENT 6      â”‚                                             â”‚
â”‚                          â”‚    Report       â”‚                                             â”‚
â”‚                          â”‚                 â”‚                                             â”‚
â”‚                          â”‚  + ML Predict   â”‚â—„â”€â”€â”€â”€ CatBoost + SHAP                       â”‚
â”‚                          â”‚  + RAG Interp   â”‚â—„â”€â”€â”€â”€ Claude API + Vector                   â”‚
â”‚                          â”‚                 â”‚                                             â”‚
â”‚                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                             â”‚
â”‚                                   â”‚                                                      â”‚
â”‚                                   â–¼                                                      â”‚
â”‚                           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                               â”‚
â”‚                           â”‚ report.html  â”‚                                               â”‚
â”‚                           â”‚ (Interactive)â”‚                                               â”‚
â”‚                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                               â”‚
â”‚                                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Network Analysis Performance Optimization

Agent 2 (Network)ì—ì„œ ëŒ€ê·œëª¨ ìœ ì „ì ë„¤íŠ¸ì›Œí¬ë¥¼ ì²˜ë¦¬í•  ë•Œ ë‹¤ìŒ ìµœì í™”ê°€ ì ìš©ë©ë‹ˆë‹¤:

| ë‹¨ê³„ | ìµœì í™” ê¸°ë²• | ì„±ëŠ¥ í–¥ìƒ |
|------|-------------|-----------|
| **Correlation ê³„ì‚°** | Vectorized numpy í–‰ë ¬ ì—°ì‚° | O(nÂ²) ë£¨í”„ â†’ í–‰ë ¬ ê³± (100x+) |
| **Graph ë¹Œë”©** | `from_pandas_edgelist()` | iterrows â†’ ë²¡í„°í™” (10x+) |
| **Hub Centrality** | Adaptive ì•Œê³ ë¦¬ì¦˜ | ì¡°ê±´ë¶€ ìµœì í™” (ì•„ë˜ ì°¸ì¡°) |

**Hub Gene Centrality ìµœì í™” ì „ëµ**:

```python
# Dense graph (>1M edges): betweenness ëŒ€ì‹  weighted degree ì‚¬ìš©
if n_edges > 1_000_000:
    # Weighted degree sum as betweenness proxy (17ì´ˆ vs ë¬´í•œëŒ€)
    betweenness = {n: sum(G[n][neighbor]['weight'] for neighbor in G[n]) for n in G.nodes()}

# Large graph (>1K nodes): k-sampling approximate betweenness
elif n_nodes > 1000:
    betweenness = nx.betweenness_centrality(G, k=100, weight='weight')

# Small graph: exact betweenness
else:
    betweenness = nx.betweenness_centrality(G, weight='weight')
```

**ë²¤ì¹˜ë§ˆí¬ (TCGA BRCA 50 samples, 7.5K genes, 3.38M edges)**:

| Agent | ì†Œìš” ì‹œê°„ | ì¶œë ¥ |
|-------|----------|------|
| Agent 1 (DEG) | ~30ì´ˆ | 7,583 DEGs |
| Agent 2 (Network) | ~2ë¶„ | 3.38M edges, 20 hub genes |
| Agent 3 (Pathway) | ~22ì´ˆ | 66 terms |
| Agent 4 (Validation) | ~2ë¶„ | 20 RAG interpretations |
| Agent 5 (Visualization) | ~2ë¶„ | 16 figures |
| Agent 6 (Report) | ~1ë¶„ | 11MB HTML |
| **Total** | **~8ë¶„** | ì „ì²´ íŒŒì´í”„ë¼ì¸ |

### Single-cell RNA-seq Pipeline (1-Step Process)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                                          â”‚
â”‚                      ğŸ”¬ SINGLE-CELL RNA-seq Pipeline (1-Step)                            â”‚
â”‚                                                                                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                                                                                 â”‚   â”‚
â”‚   â”‚                    UNIFIED SCANPY/SEURAT PIPELINE                               â”‚   â”‚
â”‚   â”‚                                                                                 â”‚   â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚   â”‚
â”‚   â”‚   â”‚    QC     â”‚â”€â”€â–¶â”‚  Normal   â”‚â”€â”€â–¶â”‚   HVG     â”‚â”€â”€â–¶â”‚   PCA     â”‚                â”‚   â”‚
â”‚   â”‚   â”‚ Filtering â”‚   â”‚  ization  â”‚   â”‚ Selection â”‚   â”‚           â”‚                â”‚   â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚   â”‚
â”‚   â”‚         â”‚                                               â”‚                       â”‚   â”‚
â”‚   â”‚         â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚   â”‚
â”‚   â”‚         â”‚   â”‚                                                                   â”‚   â”‚
â”‚   â”‚         â–¼   â–¼                                                                   â”‚   â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚   â”‚
â”‚   â”‚   â”‚  Batch    â”‚â”€â”€â–¶â”‚   UMAP    â”‚â”€â”€â–¶â”‚ Clusteringâ”‚â”€â”€â–¶â”‚ Cell Type â”‚                â”‚   â”‚
â”‚   â”‚   â”‚Correction â”‚   â”‚  t-SNE    â”‚   â”‚ (Leiden)  â”‚   â”‚Annotation â”‚                â”‚   â”‚
â”‚   â”‚   â”‚(Harmony)  â”‚   â”‚           â”‚   â”‚           â”‚   â”‚(CellTypist)â”‚               â”‚   â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚   â”‚
â”‚   â”‚                                                         â”‚                       â”‚   â”‚
â”‚   â”‚                                                         â–¼                       â”‚   â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚   â”‚
â”‚   â”‚   â”‚  Pseudo   â”‚â—€â”€â”€â”‚Trajectory â”‚â—€â”€â”€â”‚   DEG     â”‚â—€â”€â”€â”‚  Marker   â”‚                â”‚   â”‚
â”‚   â”‚   â”‚   bulk    â”‚   â”‚(optional) â”‚   â”‚  (Wilcox) â”‚   â”‚   Genes   â”‚                â”‚   â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚   â”‚
â”‚   â”‚                                                                                 â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                                          â”‚
â”‚   Output: AnnData (.h5ad), Cluster Markers, Cell Composition, UMAP/Violin/Dot plots     â”‚
â”‚                                                                                          â”‚
â”‚   âœ… Complete in 1 Step (QC â†’ Analysis â†’ Report in single pipeline)                      â”‚
â”‚                                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Bulk vs Single-cell Comparison

| êµ¬ë¶„ | Bulk RNA-seq (2-Step) | Single-cell RNA-seq (1-Step) |
|------|----------------------|------------------------------|
| **ì…ë ¥** | genes Ã— samples matrix | cells Ã— genes matrix |
| **ìƒ˜í”Œ ìˆ˜** | 6~100 samples | 1,000~100,000+ cells |
| **Step 1** | DESeq2 í†µê³„ ë¶„ì„ | - |
| **Step 2** | Network/Pathway/Validation/Report | QC â†’ Clustering â†’ Annotation â†’ Report |
| **ì£¼ìš” ë„êµ¬** | DESeq2, NetworkX, Enrichr, CatBoost | Scanpy, Seurat, CellTypist, Harmony |
| **ì¶œë ¥** | DEG list + HTML Report | Cell clusters + Markers + Report |

---

## ML & RAG Modules

### ML Prediction Module

```
TCGA Data â†’ Preprocess (TPMâ†’log2â†’std) â†’ Optuna HPO â†’ CatBoost â†’ SHAP Explainer
                                                           â”‚
                                                           â–¼
User Data â†’ Gene ID Mapping â†’ CatBoost Predict â†’ SHAP Waterfall â†’ Output
                                                                    â”‚
                                                                    â–¼
                                              prediction_label, probability, top_genes
                                              âš ï¸ "ì˜ˆì¸¡ì€ ì§„ë‹¨ì´ ì•„ë‹ˆë©°, ì°¸ê³ ìš©ì…ë‹ˆë‹¤"
```

**Pre-trained Models**:
| Cancer Type | Samples | AUC | Status |
|-------------|---------|-----|--------|
| Breast (BRCA) | 1,222 | 0.998 | âœ… |
| Pan-Cancer (17ì¢…) | 11,000+ | 0.988 | âœ… |

**Pan-Cancer 17ì¢… ê²€ì¦ ê²°ê³¼** (2026-01-16):
- ì „ì²´ ì •í™•ë„: 98.8% (84/85 samples)
- SKCM ì˜¤ë¶„ë¥˜ 1ê±´: SKCMâ†’HNSC (ì ë§‰ í‘ìƒ‰ì¢… ìœ ì‚¬ ë°œí˜„ íŒ¨í„´)

**í˜¼ë™ ê°€ëŠ¥ ì•”ì¢… ìŒ íƒì§€** (`CONFUSABLE_CANCER_PAIRS`):

| ìŒ ìœ í˜• | ì•”ì¢… | ì›ì¸ |
|---------|------|------|
| í¸í‰ìƒí”¼ì•”(SCC) | HNSC â†” LUSC â†” SKCM | ê°™ì€ ì¡°ì§í•™ì  ê¸°ì› |
| ì„ ì•” | LUAD â†” PAAD | ì„ (gland) ì¡°ì§ ìœ ì‚¬ |
| ì†Œí™”ê¸° | COAD â†” STAD | GI tract ê¸°ì› |
| ë¶€ì¸ê³¼ | OV â†” UCEC | MÃ¼llerian ê¸°ì› |

**2ì°¨ ê²€ì¦ ê¸°ëŠ¥** (`secondary_validation`):
- `confidence_gap`: Top1 - Top2 í™•ë¥  ì°¨ì´ (< 15%ë©´ ë¶ˆí™•ì‹¤)
- `is_confusable_pair`: ìƒë¬¼í•™ì  í˜¼ë™ ê°€ëŠ¥ ìŒ ì—¬ë¶€
- ì¡°ì§ íŠ¹ì´ ë§ˆì»¤ ë°œí˜„ ê²€ì‚¬ë¡œ ë³´ì • ê°€ëŠ¥

### Hub Gene vs Driver Gene ê°œë…

íŒŒì´í”„ë¼ì¸ì—ì„œ ì‹ë³„í•˜ëŠ” Hub Geneê³¼ ì•” Driver Geneì€ **ê·¼ë³¸ì ìœ¼ë¡œ ë‹¤ë¥¸ ê°œë…**ì…ë‹ˆë‹¤:

| êµ¬ë¶„ | Hub Gene (ë°œí˜„ ê¸°ë°˜) | Driver Gene (ë³€ì´ ê¸°ë°˜) |
|------|----------------------|------------------------|
| **ì •ì˜** | DEG ê¸°ë°˜ ë°œí˜„ ë³€í™” í° ìœ ì „ì | ì•” ë°œìƒ/ì§„í–‰ ìœ ë°œ ìœ ì „ì |
| **ë°ì´í„°** | RNA-seq (mRNA ë°œí˜„) | DNA ë³€ì´ (WGS/WES) |
| **ì‚°ì¶œ ë°©ì‹** | \|log2FC\| Ã— -log10(p) | ì²´ì„¸í¬ ë³€ì´ ë¹ˆë„ + ê¸°ëŠ¥ì  ì¦ê±° |
| **ì˜ë¯¸** | ë°œí˜„ ìˆ˜ì¤€ ë³€í™” ë°˜ì˜ | ë‹¨ë°±ì§ˆ ê¸°ëŠ¥ ë³€í™” ìœ ë°œ |

**Hub Gene â‰  Driver Geneì¸ ì´ìœ **:
- Driver geneì€ ë³€ì´(mutation)ë¥¼ í†µí•´ ì‘ìš©í•˜ë©°, mRNA ë°œí˜„ ë³€í™”ê°€ ì—†ì„ ìˆ˜ ìˆìŒ
- ì˜ˆ: TP53 ë³€ì´ëŠ” ë‹¨ë°±ì§ˆ ê¸°ëŠ¥ ìƒì‹¤ì„ ìœ ë°œí•˜ì§€ë§Œ mRNA ìˆ˜ì¤€ì€ ì •ìƒì¼ ìˆ˜ ìˆìŒ
- Hub geneì€ ì•”ì˜ "ê²°ê³¼"ë¥¼, driver geneì€ ì•”ì˜ "ì›ì¸"ì„ ë°˜ì˜

### Driver Gene ì‹ë³„ íŒŒì´í”„ë¼ì¸

**íŒŒì´í”„ë¼ì¸ë³„ Driver Gene ë¶„ì„ ìˆ˜ì¤€**:

| íŒŒì´í”„ë¼ì¸ | ì…ë ¥ ë°ì´í„° | Driver Gene ë¶„ì„ | ì‹ ë¢°ë„ |
|-----------|------------|-----------------|--------|
| **Bulk RNA-seq (1-Step)** | count_matrix.csv | PREDICTION (DB ë§¤ì¹­) | ë‚®ìŒ |
| **Bulk + WGS/WES (2-Step)** | count_matrix.csv + VCF/MAF | IDENTIFICATION (ë³€ì´ ê²€ì¦) | ë†’ìŒ |
| **Single-cell (1-Step)** | 10X/h5ad | Cell typeë³„ ë§ˆì»¤ | ì¤‘ê°„ |

**Multi-omic 2-Step Pipeline (Bulk + WGS/WES)**:

```
Step 1: RNA-seq Analysis
â”œâ”€â”€ Agent 1 (DEG): DESeq2 í†µê³„ ë¶„ì„
â”œâ”€â”€ Agent 2 (Network): Hub gene ì‹ë³„
â”œâ”€â”€ Agent 3 (Pathway): GO/KEGG ê²½ë¡œ ë¶„ì„
â”œâ”€â”€ Agent 4 (Validation): ë°œí˜„ ê¸°ë°˜ DB ê²€ì¦
â””â”€â”€ Agent 5 (Visualization): ì‹œê°í™”

Step 2: Variant Analysis + Integration
â”œâ”€â”€ Agent Variant: VCF/MAF íŒŒì‹± â†’ Driver mutation ì‹ë³„
â”‚   â”œâ”€â”€ Hotspot mutation ê²€ì¶œ (KRAS G12C, BRAF V600E ë“±)
â”‚   â”œâ”€â”€ LOF/GOF íš¨ê³¼ ì˜ˆì¸¡
â”‚   â””â”€â”€ VAF/Depth í’ˆì§ˆ í•„í„°ë§
â”‚
â”œâ”€â”€ Agent Integrated Driver: í†µí•© ë“œë¼ì´ë²„ ë¶„ì„
â”‚   â”œâ”€â”€ Mutation + Expression ì¦ê±° í†µí•©
â”‚   â”œâ”€â”€ Actionability í‰ê°€ (OncoKB)
â”‚   â””â”€â”€ Druggable target ì‹ë³„
â”‚
â””â”€â”€ Agent 6 (Report): í†µí•© ë¦¬í¬íŠ¸ ìƒì„±
```

**Integrated Driver ë¶„ë¥˜ ì²´ê³„**:

| ë¶„ë¥˜ | ì ìˆ˜ | ê·¼ê±° |
|------|------|------|
| **confirmed_driver** | â‰¥80 | Mutation + Expression ëª¨ë‘ ì¡´ì¬ |
| **high_confidence** | â‰¥60 | ê°•í•œ ì¦ê±° (hotspot ë˜ëŠ” ë†’ì€ ë°œí˜„ ë³€í™”) |
| **candidate** | â‰¥40 | ì¼ë¶€ ì¦ê±° ì¡´ì¬ |
| **mutation_only** | <40 | ë³€ì´ë§Œ ìˆê³  ë°œí˜„ ë³€í™” ì—†ìŒ |
| **expression_only** | <40 | ë°œí˜„ ë³€í™”ë§Œ ìˆê³  ë³€ì´ ì—†ìŒ |

**VCF/MAF ì…ë ¥ í˜•ì‹**:

```bash
# VCF íŒŒì¼ (WGS/WES calling ê²°ê³¼)
input_dir/
â”œâ”€â”€ count_matrix.csv
â”œâ”€â”€ metadata.csv
â””â”€â”€ somatic_variants.vcf  # ë˜ëŠ” .vcf.gz

# MAF íŒŒì¼ (TCGA í˜•ì‹)
input_dir/
â”œâ”€â”€ count_matrix.csv
â”œâ”€â”€ metadata.csv
â””â”€â”€ mutations.maf  # ë˜ëŠ” .maf.gz
```

**íŒŒì´í”„ë¼ì¸ ìë™ ì„ íƒ**:
- VCF/MAF íŒŒì¼ì´ ìˆìœ¼ë©´ â†’ "multiomic" íŒŒì´í”„ë¼ì¸ ìë™ ì„ íƒ
- ì—†ìœ¼ë©´ â†’ "bulk" íŒŒì´í”„ë¼ì¸ (ë°œí˜„ ê¸°ë°˜ ì˜ˆì¸¡ë§Œ ìˆ˜í–‰)

### RAG Interpretation Module

```
Gene Symbol + Cancer Type + Direction
              â”‚
              â–¼
    PubMedBERT Embedding â†’ ChromaDB Search â†’ Top-k chunks
                                                   â”‚
                                                   â–¼
                                            Claude API
                                     (Literature-backed interpretation)
                                                   â”‚
                                                   â–¼
                              "BRCA1ì€ DNA ì†ìƒ ë³µêµ¬ì— ì¤‘ìš”í•œ ì—­í• ..." [PMID: 12345678]
```

### DGIdb Integration (Drug-Gene Interactions)

DGIdb v5 GraphQL APIë¥¼ í†µí•´ ê²€ì¦ëœ ì•½ë¬¼-ìœ ì „ì ìƒí˜¸ì‘ìš© ì •ë³´ë¥¼ ì œê³µí•©ë‹ˆë‹¤:

```python
from rnaseq_pipeline.rag.dgidb_client import DGIdbClient, get_therapeutic_targets

# ì•½ë¬¼-ìœ ì „ì ìƒí˜¸ì‘ìš© ì¡°íšŒ
client = DGIdbClient()
interactions = client.get_drug_interactions(["EGFR", "KRAS", "TP53"])

# ì¹˜ë£Œ í‘œì  ì¶”ì²œ
targets = get_therapeutic_targets(hub_genes, deg_genes, max_targets=10)
```

**DGIdb ì œê³µ ì •ë³´**:
- ì•½ë¬¼-ìœ ì „ì ìƒí˜¸ì‘ìš© (interaction_types, interaction_score)
- ìœ ì „ì ì¹´í…Œê³ ë¦¬ (KINASE, RECEPTOR, DRUGGABLE ë“±)
- FDA ìŠ¹ì¸ ì•½ë¬¼ ì—¬ë¶€
- ë¬¸í—Œ ê·¼ê±° (PMIDs)
- ë°ì´í„° ì¶œì²˜ (DrugBank, PharmGKB, ChEMBL, OncoKB ë“±)

### Research Recommendations (LLM ê¸°ë°˜)

Agent 6ì—ì„œ LLMì„ í™œìš©í•˜ì—¬ ìë™ ìƒì„±ë˜ëŠ” ì—°êµ¬ ì¶”ì²œ:

| ì„¹ì…˜ | ë‚´ìš© |
|------|------|
| **therapeutic_targets** | ê³ /ì¤‘ ìš°ì„ ìˆœìœ„ ì¹˜ë£Œ í‘œì , ê¸°ì¡´ ì•½ë¬¼, ê·¼ê±° |
| **drug_repurposing** | ì•½ë¬¼ ì¬ëª©ì í™” í›„ë³´, ì›ë˜ ì ì‘ì¦, ì„ìƒ ìƒíƒœ |
| **experimental_validation** | qPCR, Western, IHC, Knockdown, Overexpression í”„ë¡œí† ì½œ |
| **biomarker_development** | ì§„ë‹¨/ì˜ˆí›„ ë°”ì´ì˜¤ë§ˆì»¤ í›„ë³´, ê·¼ê±° ìˆ˜ì¤€ |
| **future_research_directions** | ë‹¨ê¸°/ì¤‘ê¸°/ì¥ê¸° ì—°êµ¬ ë°©í–¥ |

**ìƒì„± íŒŒì¼**: `research_recommendations.json`

### Paper Explainer í‰ê°€ ê¸°ì¤€

**Paper Characteristics** (`paper_explainer.py`):

| ì¹´í…Œê³ ë¦¬ | í•­ëª© | ì„¤ëª… |
|----------|------|------|
| **ê¸°ë³¸ ì •ë³´** | study_type | ì—°êµ¬ ìœ í˜• (Clinical Trial, Cohort, etc.) |
| | study_design | ì—°êµ¬ ì„¤ê³„ (Randomized, Retrospective, etc.) |
| | main_finding | í•µì‹¬ ë°œê²¬ ìš”ì•½ |
| **ë°©ë²•ë¡ ** | methodology | ì‚¬ìš©ëœ ë¶„ì„ ë°©ë²• |
| | sample_info | ìƒ˜í”Œ ì •ë³´ (n=, source) |
| | techniques | ì‚¬ìš© ê¸°ìˆ  (RNA-seq, WGS, etc.) |
| **ê·¼ê±° ìˆ˜ì¤€** | evidence_level | ê·¼ê±° ìˆ˜ì¤€ (I-IV) |
| | clinical_relevance | ì„ìƒ ê´€ë ¨ì„± (High/Medium/Low) |
| **ê°•ì /í•œê³„** | strengths | ì—°êµ¬ì˜ ê°•ì  (ë¦¬ìŠ¤íŠ¸) |
| | limitations | ì—°êµ¬ì˜ í•œê³„ì  (ë¦¬ìŠ¤íŠ¸) |
| **í‰ê°€ ì ìˆ˜** | relevance_score | ê´€ë ¨ì„± ì ìˆ˜ (1-5) |
| | novelty_score | í˜ì‹ ì„± ì ìˆ˜ (1-5) |
| | quality_score | í’ˆì§ˆ ì ìˆ˜ (1-5) |
| **í•µì‹¬ ìš”ì†Œ** | key_genes | ì£¼ìš” ìœ ì „ì (ë¦¬ìŠ¤íŠ¸) |
| | key_pathways | ì£¼ìš” ê²½ë¡œ (ë¦¬ìŠ¤íŠ¸) |

---

## Paper Collection & VectorDB

### RNA-seq íŠ¹í™” ë…¼ë¬¸ ì»¬ë ‰ì…˜ (17ì¢… ì•”ì¢…)

ML Pan-Cancer 17ì¢… ì „ì²´ì— ëŒ€í•œ RNA-seq ë…¼ë¬¸ì´ ì¸ë±ì‹±ë˜ì–´ RAG í•´ì„ì— í™œìš©ë©ë‹ˆë‹¤.

| TCGA ì½”ë“œ | ì•”ì¢…ëª… | ì»¬ë ‰ì…˜ëª… | ë…¼ë¬¸ ìˆ˜ |
|-----------|--------|----------|---------|
| BLCA | ë°©ê´‘ì•” | rnaseq_bladder_cancer | 50í¸ |
| BRCA | ìœ ë°©ì•” | rnaseq_breast_cancer | 50í¸ |
| COAD | ëŒ€ì¥ì•” | rnaseq_colorectal_cancer | 50í¸ |
| GBM | êµëª¨ì„¸í¬ì¢… | rnaseq_glioblastoma | 50í¸ |
| HNSC | ë‘ê²½ë¶€ì•” | rnaseq_head_neck_cancer | 50í¸ |
| KIRC | ì‹ ì¥ì•” | rnaseq_kidney_cancer | 50í¸ |
| LGG | ì €ë“±ê¸‰ ì‹ ê²½êµì¢… | rnaseq_low_grade_glioma | 50í¸ |
| LIHC | ê°„ì•” | rnaseq_liver_cancer | 50í¸ |
| LUAD/LUSC | íì•” | rnaseq_lung_cancer | 50í¸ |
| OV | ë‚œì†Œì•” | rnaseq_ovarian_cancer | 50í¸ |
| PAAD | ì·Œì¥ì•” | rnaseq_pancreatic_cancer | 50í¸ |
| PRAD | ì „ë¦½ì„ ì•” | rnaseq_prostate_cancer | 50í¸ |
| SKCM | í”¼ë¶€í‘ìƒ‰ì¢… | rnaseq_melanoma | 50í¸ |
| STAD | ìœ„ì•” | rnaseq_stomach_cancer | 50í¸ |
| THCA | ê°‘ìƒì„ ì•” | rnaseq_thyroid_cancer | 50í¸ |
| UCEC | ìê¶ë‚´ë§‰ì•” | rnaseq_uterine_cancer | 50í¸ |
| - | í˜ˆì•¡ì•” | rnaseq_blood_cancer | 50í¸ |

**ì´ê³„**: ~850í¸, ~53,000+ chunks

### ë…¼ë¬¸ ìˆ˜ì§‘ ìŠ¤í¬ë¦½íŠ¸

```bash
# RNA-seq íŠ¹í™” ë…¼ë¬¸ ìˆ˜ì§‘
python scripts/collect_rnaseq_papers.py --all --count 50
python scripts/collect_rnaseq_papers.py --cancer pancreatic_cancer --count 50
python scripts/collect_rnaseq_papers.py --list  # ê°€ëŠ¥í•œ ì•”ì¢… ëª©ë¡

# ì¼ë°˜ ë…¼ë¬¸ ìˆ˜ì§‘
python scripts/pubmed_collector.py --disease pancreatic_cancer --count 100
```

### ë…¼ë¬¸ ì¸ìš© ìˆ˜ ê¸°ë°˜ ë­í‚¹

Semantic Scholar APIë¥¼ ì‚¬ìš©í•˜ì—¬ ë…¼ë¬¸ í’ˆì§ˆ ì ìˆ˜ë¥¼ ê³„ì‚°í•©ë‹ˆë‹¤.

```bash
# íŠ¹ì • ì»¬ë ‰ì…˜ ë­í‚¹
python scripts/paper_citation_ranker.py --collection rnaseq_breast_cancer --top 20

# ì „ì²´ RNA-seq ì»¬ë ‰ì…˜ ë­í‚¹
python scripts/paper_citation_ranker.py --all-rnaseq

# ì»¬ë ‰ì…˜ ëª©ë¡
python scripts/paper_citation_ranker.py --list
```

**í’ˆì§ˆ ì ìˆ˜ ê³„ì‚° (100ì  ë§Œì )**:
- ì¸ìš© ì ìˆ˜ (0-40): í”¼ì¸ìš© íšŸìˆ˜ ê¸°ë°˜ (log scale)
- ìµœì‹ ì„± ì ìˆ˜ (0-30): ì¶œíŒ ì—°ë„ ê¸°ë°˜
- ì½˜í…ì¸  ì ìˆ˜ (0-30): Full-text ìœ ë¬´, chunk ìˆ˜

---

## Project Structure

```
VectorDB_BioInsight/
â”œâ”€â”€ backend/
â”‚   â””â”€â”€ app/
â”‚       â”œâ”€â”€ main.py                      # FastAPI entry point
â”‚       â”œâ”€â”€ api/routes/
â”‚       â”‚   â”œâ”€â”€ paper.py                 # Paper analysis
â”‚       â”‚   â”œâ”€â”€ chat.py                  # AI chat
â”‚       â”‚   â”œâ”€â”€ crawler.py               # Web crawler
â”‚       â”‚   â”œâ”€â”€ rnaseq.py                # RNA-seq API (SSE)
â”‚       â”‚   â””â”€â”€ briefing.py              # Daily Briefing
â”‚       â””â”€â”€ core/
â”‚           â”œâ”€â”€ pdf_parser.py            # PDF extraction
â”‚           â”œâ”€â”€ text_splitter.py         # Bio-aware chunking
â”‚           â”œâ”€â”€ embeddings.py            # PubMedBERT
â”‚           â”œâ”€â”€ vector_store.py          # ChromaDB
â”‚           â””â”€â”€ web_crawler_agent.py     # Multi-source crawler
â”‚
â”œâ”€â”€ frontend/react_app/
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ Hero.tsx                     # Search interface
â”‚   â”‚   â”œâ”€â”€ KnowledgeGraph.tsx           # 3D visualization
â”‚   â”‚   â”œâ”€â”€ RNAseqUploadModal.tsx        # RNA-seq upload
â”‚   â”‚   â”œâ”€â”€ PipelineProgress.tsx         # SSE progress
â”‚   â”‚   â””â”€â”€ DailyBriefing.tsx            # News digest
â”‚   â””â”€â”€ services/client.ts               # API client
â”‚
â”œâ”€â”€ rnaseq_pipeline/
â”‚   â”œâ”€â”€ orchestrator.py                  # Pipeline controller (3 types)
â”‚   â”œâ”€â”€ agents/
â”‚   â”‚   â”œâ”€â”€ agent1_deg.py                # DESeq2 analysis
â”‚   â”‚   â”œâ”€â”€ agent2_network.py            # Network/Hub genes
â”‚   â”‚   â”œâ”€â”€ agent3_pathway.py            # GO/KEGG enrichment
â”‚   â”‚   â”œâ”€â”€ agent4_validation.py         # DB validation
â”‚   â”‚   â”œâ”€â”€ agent5_visualization.py      # Plots generation
â”‚   â”‚   â”œâ”€â”€ agent6_report.py             # HTML report
â”‚   â”‚   â”œâ”€â”€ agent_singlecell.py          # Single-cell (Scanpy)
â”‚   â”‚   â”œâ”€â”€ agent_singlecell_report.py   # Single-cell report
â”‚   â”‚   â”œâ”€â”€ agent_variant.py             # WGS/WES variant analysis
â”‚   â”‚   â””â”€â”€ agent_integrated_driver.py   # Multi-omic driver ID
â”‚   â”œâ”€â”€ ml/
â”‚   â”‚   â”œâ”€â”€ trainer.py                   # CatBoost training
â”‚   â”‚   â”œâ”€â”€ predictor.py                 # Prediction service
â”‚   â”‚   â””â”€â”€ pancancer_classifier.py      # Pan-cancer model
â”‚   â””â”€â”€ rag/
â”‚       â”œâ”€â”€ gene_interpreter.py          # RAG interpretation
â”‚       â””â”€â”€ dgidb_client.py              # DGIdb API client
â”‚
â”œâ”€â”€ bio-daily-briefing/
â”‚   â””â”€â”€ src/
â”‚       â”œâ”€â”€ aggregator.py                # Multi-source aggregation
â”‚       â”œâ”€â”€ scheduler.py                 # Automation (launchd)
â”‚       â””â”€â”€ sources/                     # FDA, Trials, bioRxiv
â”‚
â”œâ”€â”€ models/rnaseq/                       # Pre-trained models
â”‚   â”œâ”€â”€ breast/                          # TCGA-BRCA (AUC 0.998)
â”‚   â””â”€â”€ pancancer/                       # Multi-cancer classifier
â”‚
â”œâ”€â”€ chroma_db/                           # Vector database
â”œâ”€â”€ data/papers/                         # Collected papers
â””â”€â”€ docs/
    â”œâ”€â”€ UNIFIED_ARCHITECTURE.md          # Full architecture
    â””â”€â”€ RNASEQ_ARCHITECTURE.md           # RNA-seq details
```

---

## API Endpoints

### Core Features (âœ… êµ¬í˜„ë¨)

```
# Paper Analysis
POST   /api/paper/upload
POST   /api/paper/analyze
POST   /api/chat/ask

# Real-time Search
GET    /api/crawler/search?q=...
GET    /api/crawler/trending/{category}
POST   /api/crawler/fetch/doi

# Knowledge Graph
GET    /api/graph/
GET    /api/graph/node/{id}

# Daily Briefing
GET    /api/briefing/latest
GET    /api/briefing/archive
```

### RNA-seq Analysis (âœ… êµ¬í˜„ë¨)

```
# File Upload & Analysis
POST   /api/rnaseq/upload                # count_matrix.csv, metadata.csv
POST   /api/rnaseq/start/{job_id}        # Start pipeline
GET    /api/rnaseq/progress/{job_id}     # SSE streaming
GET    /api/rnaseq/status/{job_id}       # Status check

# Results
GET    /api/rnaseq/report/{job_id}       # HTML report
GET    /api/rnaseq/download/{job_id}     # Download results
```

---

## Code Patterns & Guidelines

### ì¶œë ¥ ì–¸ì–´ (í•œêµ­ì–´ ê¸°ë³¸)

```python
# âœ… Correct
interpretation = "KRAS ìƒí–¥ ë°œí˜„ì€ ì·Œì¥ì•”ì—ì„œ í”íˆ ê´€ì°°ë©ë‹ˆë‹¤."

# âŒ Wrong
interpretation = "KRAS upregulation is commonly observed in pancreatic cancer."
```

### ë¶ˆí™•ì‹¤ì„± ëª…ì‹œ (í•„ìˆ˜)

```python
# âœ… Correct
result = {
    "prediction": "ì·Œì¥ì•” í™•ë¥  87%",
    "warning": "âš ï¸ ì˜ˆì¸¡ì´ë©° ì§„ë‹¨ì´ ì•„ë‹™ë‹ˆë‹¤",
    "suggested_validations": ["ì¡°ì§ê²€ì‚¬ í™•ì¸"]
}

# âŒ Wrong
result = {"prediction": "ì´ í™˜ìëŠ” ì·Œì¥ì•”ì…ë‹ˆë‹¤"}
```

### PMID ì¸ìš© (í•„ìˆ˜)

```python
# âœ… Correct
interpretation = "KRASëŠ” ì·Œì¥ì•”ì˜ 90%ì—ì„œ ë³€ì´ê°€ ê´€ì°°ë¨ [PMID: 29625050]"

# âŒ Wrong
interpretation = "KRASëŠ” ì·Œì¥ì•”ì˜ ì£¼ìš” ì›ì¸ì´ë‹¤"  # ì¶œì²˜ ì—†ìŒ
```

---

## DO / DON'T Checklist

| DO âœ… | DON'T âŒ |
|-------|---------|
| ì¶œì²˜/ê·¼ê±° ëª…ì‹œ (PMID, URL) | ì¶œì²˜ ì—†ëŠ” ì£¼ì¥ |
| í•œê³„/ì£¼ì˜ì‚¬í•­ ì•ˆë‚´ | ë¶ˆí™•ì‹¤ì„± ìˆ¨ê¹€ |
| í•œêµ­ì–´ ìš°ì„  ì¶œë ¥ | ì˜ë¬¸ ì „ìš© |
| ML ì˜ˆì¸¡ = "ì°¸ê³ ìš©" ëª…ì‹œ | "ì§„ë‹¨"ìœ¼ë¡œ í‘œí˜„ |
| ê²€ì¦ ì‹¤í—˜ ì œì•ˆ | ê²€ì¦ ì—†ì´ ê²°ë¡  |

---

## Development Roadmap

### Completed (âœ…)

| Feature | Description |
|---------|-------------|
| Paper RAG | PDF ë¶„ì„, ì„ë² ë”©, Q&A |
| Web Crawler | PubMed, bioRxiv ê²€ìƒ‰ |
| Knowledge Graph | 3D ì‹œê°í™” |
| Daily Briefing | AI ë‰´ìŠ¤ ë‹¤ì´ì œìŠ¤íŠ¸ |
| RNA-seq 6-Agent | DEG, Network, Pathway, Validation, Viz, Report |
| ML Prediction | CatBoost + SHAP (AUC 0.998) |
| RAG Interpretation | Claude + PubMedBERT |
| Web UI | SSE Progress Streaming |

### Planned (ğŸ“‹)

| Feature | Description |
|---------|-------------|
| Single-cell Pipeline | Scanpy/Seurat integration |
| Cell Type Annotation | CellTypist |
| Proteomics | ë‹¨ë°±ì§ˆ ë¶„ì„ |
| Genomics | ë³€ì´ ë¶„ì„ |
| Drug Discovery | ì•½ë¬¼ íƒìƒ‰ |

---

## Important Notes

### ë¦¬í¬íŠ¸ ìƒì„± ì‹œ ì£¼ì˜ì‚¬í•­

```python
# âš ï¸ ë¦¬í¬íŠ¸ ìƒì„± ì‹œ CSV íŒŒì¼ í•„ìš”
# report_data.jsonë§Œ ìˆìœ¼ë©´ "No data" í‘œì‹œë¨

# âœ… ì˜¬ë°”ë¥¸ í´ë” êµ¬ì¡°
output_dir/
â”œâ”€â”€ deg_significant.csv       # í•„ìˆ˜
â”œâ”€â”€ hub_genes.csv             # í•„ìˆ˜
â”œâ”€â”€ pathway_summary.csv       # í•„ìˆ˜
â”œâ”€â”€ integrated_gene_table.csv # í•„ìˆ˜ (Entrez ID â†’ Gene Symbol ë§¤í•‘)
â”œâ”€â”€ research_recommendations.json  # LLM ìƒì„± ì—°êµ¬ ì¶”ì²œ
â””â”€â”€ figures/
    â”œâ”€â”€ volcano_plot.png
    â””â”€â”€ network_3d_interactive.html
```

### HTML ë¦¬í¬íŠ¸ ì„¹ì…˜ êµ¬ì¡° (v4.0)

| ì„¹ì…˜ | ë‚´ìš© |
|------|------|
| 1. Executive Summary | Extended Abstract, í•µì‹¬ ë°œê²¬ ìš”ì•½ |
| 2. Quality Control | PCA plot, ìƒ˜í”Œ í’ˆì§ˆ ë¶„ì„ |
| 3. Differential Expression | Volcano plot, Heatmap, DEG í†µê³„ |
| 4. Pathway Analysis | GO/KEGG enrichment, Pathway barplot |
| 5. Database Validation | COSMIC/OncoKB ë§¤ì¹­, ë¬¸í—Œ ê·¼ê±° |
| 6. Network Analysis | Hub genes í…Œì´ë¸” (Gene Symbol), 3D network |
| 7. ML Prediction | Pan-cancer ì˜ˆì¸¡, SHAP í•´ì„ |
| **8. Clinical Implications** | ë°”ì´ì˜¤ë§ˆì»¤ í›„ë³´, ì¹˜ë£Œ í‘œì , ì•½ë¬¼ ì¬ëª©ì í™” í…Œì´ë¸” |
| **9. Follow-up Experiments** | ë°œí˜„ ê²€ì¦, ê¸°ëŠ¥ ì—°êµ¬, ì„ìƒ ê²€ì¦ í”„ë¡œí† ì½œ |
| 10. Research Recommendations | ë‹¨ê¸°/ì¤‘ê¸°/ì¥ê¸° ì—°êµ¬ ë°©í–¥ |
| 11. Methods & References | ë¶„ì„ íŒŒë¼ë¯¸í„°, ì°¸ê³  ë¬¸í—Œ |

### Daily Briefing ë°ì´í„° í˜•ì‹

```python
# newsletter_generatorëŠ” list í˜•ì‹ì„ ê¸°ëŒ€í•¨
# scheduler.pyì—ì„œ ë°˜ë“œì‹œ ë³€í™˜ í•„ìš”!

# âŒ Wrong (dict í˜•ì‹)
clinical_trials = {"phase3_results": [...], "new_trials": [...]}

# âœ… Correct (list í˜•ì‹)
clinical_trials = [
    {"type": "phase3_completed", "title": "...", "description": "..."}
]
```

---

## Resources

- [FastAPI Documentation](https://fastapi.tiangolo.com/)
- [ChromaDB Documentation](https://docs.trychroma.com/)
- [PubMedBERT](https://huggingface.co/microsoft/BiomedNLP-PubMedBERT-base-uncased-abstract)
- [DESeq2 Vignette](https://bioconductor.org/packages/release/bioc/vignettes/DESeq2/inst/doc/DESeq2.html)
- [Scanpy Documentation](https://scanpy.readthedocs.io/)
- [CatBoost Documentation](https://catboost.ai/docs/)
- [SHAP Documentation](https://shap.readthedocs.io/)

---

*Last Updated: 2026-01-18*
